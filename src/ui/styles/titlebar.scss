@use 'variables' as v;
@use 'mixins' as m;

.titlebar {
  @include m.flex-between;
  height: v.$titlebar-height;
  background: var(--surface-ground);
  border-bottom: v.$border-width-base solid var(--surface-border);
  user-select: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: v.$z-index-titlebar;

  &-drag-region {
    flex: 1;
    height: 100%;
    @include m.flex-start;
    padding-left: v.$titlebar-padding-x;
    -webkit-app-region: drag;
  }

  &-title {
    font-size: v.$font-size-base;
    font-weight: v.$font-weight-semibold;
    color: var(--text-color);
    @include m.flex-start;

    i {
      margin-right: v.$spacing-2;
    }
  }

  &-controls {
    display: flex;
    align-items: center;
    height: 100%;
    padding-right: v.$spacing-2;
    gap: v.$spacing-2;
    -webkit-app-region: no-drag;
  }

  &-connection-status {
    @include m.flex-center;
    gap: v.$spacing-2;
    padding: v.$spacing-1 v.$spacing-3;
    background: var(--surface-card);
    border: v.$border-width-base solid var(--surface-border);
    border-radius: v.$border-radius-base;
    font-size: v.$font-size-sm;
    color: var(--text-color-secondary);
    max-width: 200px;
    cursor: default;

    i {
      color: var(--green-400);
      font-size: v.$font-size-xs;
      flex-shrink: 0;
    }

    span {
      @include m.text-truncate;
    }
  }

  &-button {
    width: v.$titlebar-button-width !important;
    height: 32px !important;
    border-radius: v.$border-radius-base !important;
    color: var(--text-color-secondary) !important;
    transition: v.$transition-fast;

    &:hover {
      background-color: var(--surface-hover) !important;
      color: var(--text-color) !important;
    }
  }
}

// Tooltip fix
.p-tooltip {
  white-space: nowrap;
  max-width: none;

  .p-tooltip-text {
    white-space: nowrap;
    padding: v.$spacing-2 v.$spacing-3;
  }
}

.app-content {
  margin-top: v.$titlebar-height;
  height: calc(100vh - #{v.$titlebar-height});
  overflow: auto;
  padding: v.$content-padding;
}

// Connection menu styling
.active-connection {
  background-color: var(--surface-hover);
}

@include m.respond-to-sm {
  .titlebar {
    &-title {
      font-size: v.$font-size-xs;
    }

    &-connection-status {
      display: none;
    }
  }
}